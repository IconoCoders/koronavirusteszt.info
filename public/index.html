<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta property="og:title" content="Koronavírus Online Teszt">
    <meta property="og:site_name" content="KoronavírusTeszt">
    <meta property="og:url" content="Koronavírus Online Teszt">
    <meta property="og:description" content="Koronavírus Online Teszt">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://screencovid.com/public/images/covid19.jpg">
    <title>Koronavírus Online Teszt</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.4/jquery.mobile-1.4.4.min.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap&subset=latin-ext" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.4/jquery.mobile-1.4.4.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/3.1.0/mustache.min.js"
            integrity="sha256-MPgtcamIpCPKRRm1ppJHkvtNBAuE71xcOM+MmQytXi8=" crossorigin="anonymous"></script>

    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
        }

        .symptomdescr {
            font-weight: bold;
            color: #000;
            padding: 8px 0 14px 0;
            margin: auto;
            max-width: 500px;
        }

        #container {
            width: 100%;
            margin: auto !important;
            display: block;
            height: 480px;
            position: relative;
            list-style-type: none;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            /*padding: 5px;*/
        }

        .buddy {
            text-align: center;
            display: none;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            color: #000;
            width: -webkit-fill-available;
            padding: 10px;
            margin: 10px auto;
            height: auto;
            max-width: 375px;
            position: absolute;
            left: 0;
            right: 0;
            cursor: hand;
        }

        .results {
            text-align: center;
            display: none;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            color: #000;
            width: -webkit-fill-available;
            padding: 10px;
            margin: 10px auto;
            height: auto;
            max-width: 375px;
            position: absolute;
            left: 0;
            right: 0;
            cursor: hand;
            font-size: 1.5em;
        }

        .rotate-left {
            transform: rotate(30deg) scale(0.8);
            transition: 1s;
            cursor: e-resize;
            opacity: 0;
            z-index: 10;
        }

        .rotate-right {
            transform: rotate(-30deg) scale(0.8);
            transition: 1s;
            opacity: 0;
            cursor: w-resize;
            z-index: 10;
        }

        .avatar {
            background: rgb(236, 240, 245);;
            width: -webkit-fill-available;
            height: 340px;
            display: block;
            margin-left: 5px;
            margin-right: 5px;
            margin-bottom: 10px;
            background-size: auto 100% !important;
            background-position: center;
            background-repeat: no-repeat;
        }

        .like {
            border-radius: 5px;
            padding: 5px 10px;
            border: 2px solid green;
            color: green;
            text-transform: uppercase;
            font-size: 15px;
            position: absolute;
            top: 50px;
            right: 40px;
            text-shadow: none;
        }

        .dislike {
            border-radius: 5px;
            padding: 5px 10px;
            border: 2px solid red;
            color: red;
            text-transform: uppercase;
            font-size: 15px;
            position: absolute;
            top: 50px;
            left: 40px;
            text-shadow: none;
        }

        #total {
            text-align: center;
            font-size: 2em;
        }

        #totaldescr {
            text-align: center;
            margin: auto;
            max-width: 500px;
            padding: 10px;
        }

        #footer {
            text-align: center;
            padding: 10px;
            font-size: 1em;
        }

        .button-yes {
            width: 150px !important;
            display: inline-block;
        }

        .button-no {
            width: 150px !important;
            display: inline-block;
        }

        .button-outer {
            width: 100%;
            text-align: center;
        }

        .button-inner {
            display: inline-block;
        }

        .checklist-label {
            text-align: center !important;
            max-width: 375px !important;
            margin: 0 auto !important;
        }
    </style>
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-155316924-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-155316924-3');
    </script>
</head>

<body>
<script id="covid19-template" type="text/html">
    <div class="buddy" value="{{value}}" id="{{id}}">
        <div class="symptomdescr">{{question}}</div>
        <div class="avatar" style="display: block; background-image: url({{image_url}}); background-size: "></div>
        <div class="button-outer">
            <div class="button-inner">
                <button class="ui-button ui-widget ui-corner-all button-no" id="no-button">NEM</button>
            </div>
            <div class="button-inner">
                <button id="yes-button" class="ui-button ui-widget ui-corner-all button-yes">IGEN</button>
            </div>
        </div>
    </div>
</script>

<script>
    var list_of_questions = [
        {
            'id': 'q1',
            'value': 90.5,
            'question': '37.8C feletti láz?',
            'image_url': 'public/images/fever.svg'
        },
        {'id': 'q2', 'value': 70.5, 'question': 'Száraz köhögés?', 'image_url': 'public/images/cough.svg'},
        {
            'id': 'q3',
            'value': 53.5,
            'question': 'Fáradtság (extra fáradtság)?',
            'image_url': 'public/images/fatigue.svg'
        },
        {'id': 'q4', 'value': 40, 'question': 'Étvágytalanság?', 'image_url': 'public/images/no_appetite.svg'},
        {
            'id': 'q5',
            'value': 250,
            'question': 'Légzési nehézség?',
            'image_url': 'public/images/difficulty_breathing.svg'
        },
        {
            'id': 'q6',
            'value': 29.5,
            'question': 'Köpet ürítés / váladékos köhögés?',
            'image_url': 'public/images/sputum.svg'
        },
        {
            'id': 'q7',
            'value': 27.5,
            'question': 'Izom- vagy csontfájdalom?',
            'image_url': 'public/images/body_pain.svg'
        },
        {'id': 'q8', 'value': 11, 'question': 'Torokfájás?', 'image_url': 'public/images/sore_throat.svg'},
        {'id': 'q9', 'value': 10, 'question': 'Fejfájás vagy szédülés?', 'image_url': 'public/images/headache.svg'},
        {'id': 'q10', 'value': 213, 'question': 'Zavartság?', 'image_url': 'public/images/confusion.svg'},
        {'id': 'q11', 'value': 11, 'question': 'Hidegrázás?', 'image_url': 'public/images/chills.svg'},
        {
            'id': 'q12',
            'value': 24,
            'question': 'Hányinger vagy hányás vagy hasmenés?',
            'image_url': 'public/images/nausea.svg'
        },
        {'id': 'q13', 'value': 51.9, 'question': 'Krónikus betegség?', 'image_url': 'public/images/chronic.svg'},
        {
            'id': 'q14',
            'value': 215,
            'question': 'Mellkasi fájdalom vagy mellkasi nyomás vagy szabálytalan szívverés?',
            'image_url': 'public/images/heart.svg'
        },
        {'id': 'q15', 'value': 214, 'question': 'Kékes ajkak vagy az arc?', 'image_url': 'public/images/blue.svg'},
        {
            'id': 'q16',
            'value': 51.9,
            'question': 'Idősebb mint 50 vagy fiatalabb mint 5?',
            'image_url': 'public/images/man_and_child.svg'
        },
    ];
</script>

<!-- Toolbar -->
<div data-role="header" style="background-color: #3c8dbc; border: none;">
    <h1 style="text-shadow: none; color: #fff; font-size: 20px; padding: .6em 0; font-weight: 300; margin: 0 10%;">
        Koronavírus teszt</h1>
</div>

<div style="background-color: red;color: white; width: 100%; padding: 10px; text-align: center; text-shadow: none;">
    Ez <b>NEM</b> egy hivatalos, hitelesített teszt, csak a tünetek felismerését segíti! Amennyiben valójában tüneteket
    észlel magán jelentkezzen háziorvosánál!<br/>
    <a href="https://koronavirus.gov.hu/mit-tegyunk-tunetek-eseten" style="color: white; text-decoration: underline"
       target="_blank" rel="noopener">Koronavírus tájékoztató oldal</a>
</div>

<!-- Questionaire -->
<div id="container">
    <div id="questions"></div>
    <div class="results" id="results"></div>
</div>

<!-- Symptom Checklist -->
<div class="widget">
    <div id="checklist" class="controlgroup-vertical">
    </div>
</div>

<div id="totaldescr">
    <div class="container">
        <div style="text-align: center">
            Eredmény:
            <div id="total" class="total"></div>
        </div>
        <h1>Mit tegyünk tünetek esetén?</h1>
        <p><b>A betegség leggyakoribb tünetei:</b></p>
        <p><b>A leggyakoribb tünetek: a láz, a fáradtság és a száraz köhögés.</b></p>
        <p>Egyes betegeknél jelentkezhet <b>izomfájdalom, orrdugulás, orrfolyás, torokfájás, hasmenés, légszomj</b>.</p>
        <p>Ezek a <b>tünetek általában enyhék és fokozatosan jelentkeznek</b>.</p>
        <p><b>Vannak olyan fertőzöttek, akiknél nem alakul ki semmilyen tünet</b> és nem érzik magukat betegnek.</p>

        <p><b>Mit tegyen, ha Ön potenciálisan fertőzöttnek érzi magát?</b></p>
        <p>A koronavírus most már mindenhol ott lehet Magyarországon is. Bárki hordozhatja a vírust és bárkinek
            tovább adhatja a fertőzést. Fontos, hogy lassítsuk a járvány terjedését.&nbsp;Ezért fontos mindenkinek
            betartani az ajánlásokat, a szabályokat.</p>

        <p><b>Maradjon otthon, ne menjen közösségbe!</b></p>

        <a
                href="https://koronavirus.gov.hu/cikkek/enyhe-tunetekkel-otthoni-karantenban-kell-maradni"
                id="LPlnk690727" target="_blank" rel="noopener">https://koronavirus.gov.hu/cikkek/enyhe-tunetekkel-otthoni-karantenban-kell-maradni</a>
    </div>
</div>

<div id="footer" class="footer">
    <p>Az online teszt algoritmusát<br/>
        <a
            href="https://github.com/tconley/screencovid.com/raw/master/Presentation_Prescreencovid_v9_03202020.pdf">Sajung
        Yun, Ph.D & Sijung Yun, Ph.D (Bioinformatics adjunct professors, Johns Hopkins
        University)</a> készítette.
    <p>
    <p>
    Az eredeti alkalmazás megtalálható <a href="https://www.screencovid.com/" target="_blank" rel="noopener">ScreenCovid.com
        címen</a>
    </p>
    <p>További információk: <a href="https://www.screencovid.org" target="_blank" rel="noopener">ScreenCovid.org</a></p>
    <p><a href="https://github.com/iconocoders/koronavirusteszt.info/">Közreműködés az alkalmazás fejlesztésében</a>
    <p><a href="https://github.com/tconley/screencovid.com/">Közreműködés az alkalmazás fejlesztésében (angol
    verzió)</a>
</div>

<div id="test-area"></div>

<script>
    function showResults() {
        $('#results').css("display", "block");
    }

    function updateResults(totalscore) {
        if (totalscore > 212) {
            $("#results").append("<b>Eredménye:</b> " + totalscore.toFixed(1) + "<br/> Javasolt, hogy a lehető leghamarabb orvoshoz forduljon!");
        } else {
            $("#results").append("<b>Eredménye:</b> " + totalscore.toFixed(1) + "<br/> Ön valószínüleg NEM fertőzött. Azonban amennyiben további tüneteket észlel, vagy bizonytalan mindenképpen egyeztessen háziorvosával!");
        }

        if ($("#results").css("display") == "block") {
            $('#container').css("height", $("#results").css("height"));
            $('#container').height("+=50");
        }
    }

    /* Display new checkbox and format style */
    displayCheckbox = function (h, ph) {
        $("#" + h + "-label").css('display', 'block').css('border-bottom-width', '1px')
            .css('border-bottom-left-radius', '5px').css('border-bottom-right-radius', '5px');
        $("#" + ph + "-label").css('border-bottom-width', '0px')
            .css('border-bottom-left-radius', '0px').css('border-bottom-right-radius', '0px');
        return h;
    };

    $(document).ready(function () {
        var prev_checkbox_id = "";

        // We load the questions from template + JSON.
        var template = $('#covid19-template').html();
        $.each(list_of_questions, function (index, value) {
            var html = Mustache.to_html(template, value);
            $('#questions').append(html);
        });
        $('#q1').css("display", "block"); // First question gets the focus.


        $('.button-yes').on('click', function () {
            $(this).attr('disabled', true);
            $(this).parent().parent().parent().swiperight();
        });

        $('.button-no').on('click', function () {
            $(this).attr('disabled', true);
            $(this).parent().parent().parent().swipeleft();
        });

        var totalscore = 0;
        $("#total").text(totalscore.toFixed(1));


        $(".buddy").one("swiperight", function () {
            totalscore = totalscore + parseFloat($(this).attr('value'));

            $("#total").text(totalscore.toFixed(1));
            $(this).addClass('rotate-left').delay(700).fadeOut(1);
            $('.buddy').find('.status').remove();

            $(this).append('<div class="status like">IGEN</div>');

            /* Add item to checklist */
            var checkbox_id = $(this).attr('id');
            $("#" + checkbox_id + "-input").prop("checked", true).checkboxradio('refresh');
            prev_checkbox_id = displayCheckbox(checkbox_id, prev_checkbox_id);

            if ($(this).is(':last-child')) {
                //$('.buddy:nth-child(1)').removeClass ('rotate-left rotate-right').fadeIn(300);
                //alert('message here that we are done');
                //after survey is done additional messages should be displayed about next steps
                showResults();
                updateResults(totalscore);
            } else {
                $(this).next().removeClass('rotate-left rotate-right').fadeIn(400);
            }

        });

        $(".buddy").one("swipeleft", function () {
            $(this).addClass('rotate-right').delay(700).fadeOut(1);
            $('.buddy').find('.status').remove();
            $(this).append('<div class="status dislike">Nem!</div>');

            /* Add item to checklist */
            var checkbox_id = $(this).attr('id');
            prev_checkbox_id = displayCheckbox(checkbox_id, prev_checkbox_id);

            if ($(this).is(':last-child')) {
                //$('.buddy:nth-child(1)').removeClass ('rotate-left rotate-right').fadeIn(300);
                //alert('message here that we are done');
                //after survey is done additional messages should be displayed about next steps

                showResults();
                updateResults(totalscore);
            } else {
                $(this).next().removeClass('rotate-left rotate-right').fadeIn(400);
            }

        });

        /* Generate symptom checklist */
        list_of_questions.forEach(function (item) {
            var input_id = item.id + "-input";
            var label_id = item.id + "-label";
            var list_item = '<label class="checklist-label" style="display: none;" id="' +
                label_id + '" for="' + input_id + '">' + item.question + '</label>' +
                '<input style="display: none;" type="checkbox" id="' + input_id + '" value="' + item.value + '">';
            $("#checklist").append(list_item);
            $("#" + input_id).on('change', function () {
                var symptom_value = item.value;
                totalscore += $("#" + label_id).hasClass("ui-checkbox-on") ? -symptom_value : symptom_value;
                $("#total").text(totalscore.toFixed(1));
                updateResults(totalscore);
            });
        });
        $(function () {
            $(".controlgroup-vertical").controlgroup({
                "direction": "vertical"
            });
        });

    });
</script>

</body>
</html>
